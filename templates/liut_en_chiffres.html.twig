{% extends 'base.html.twig' %}

{% block body %}

<nav class="breadcrumbnav" aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ path ('iut_test_technique') }}">Accueil</a></li>
        <li class="breadcrumb-item"><a href="#">L'IUT</a></li>
        <li class="breadcrumb-item active" aria-current="page">L'IUT en chiffres</li>
    </ol>
</nav>

<div class="container-fluid">
    <div class="row col-12 deptstitle">
        <h1>L'IUT en quelques chiffres c'est :</h1>
    </div>

    <section class="row col-12 chiffres">

        {% for key in chiffres %}

            <div class="card card_chiffres col-4">
                <div class="card-body">
                    <p class="card-text nbr value " goal="{{ key.nombre }}">0</p>
                    <p class="card-text intitule">{{ key.intitul√© }}</p>
                </div>
            </div>

        {% endfor %}

    </section>
</div>

<script>
    const counters = document.querySelectorAll('.value');
    const speed = 300;

    counters.forEach( counter => {
        const animate = () => {
            const value = +counter.getAttribute('goal');
            const data = +counter.innerText;

            const time = value / speed;
            if(data < value) {
                counter.innerText = Math.ceil(data + time);
                setTimeout(animate, 1);
            }else{
                counter.innerText = value;
            }

        }
        animate();
    });
</script>

{% endblock %}